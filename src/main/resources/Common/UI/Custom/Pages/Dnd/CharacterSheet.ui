// Character Sheet - TTRPG Plugin
// Uses shared Dnd.ui component library
$C = "../../Common.ui";
$D = "../../Dnd/Dnd.ui";

$C.@PageOverlay {
  $C.@Container {
    Anchor: (Width: 700, Height: 550);

    #Title {
      Group {
        $C.@Title {
          @Text = "Character Sheet";
        }
        Label #PlayerName {
          Anchor: (Top: 5);
          Text: "";
          Style: (FontSize: 14, TextColor: #aaaaaa);
        }
      }
    }

    #Content {
      LayoutMode: Left;

      // === ABILITY SCORES COLUMN ===
      Group #AbilityScores {
        LayoutMode: Top;
        Anchor: (Width: 200);

        $D.@SectionHeader { @Text = "ABILITY SCORES"; }

        // STR
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "STR"; }
          Label #strScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #strMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #strRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #strSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }

        // DEX
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "DEX"; }
          Label #dexScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #dexMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #dexRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #dexSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }

        // CON
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "CON"; }
          Label #conScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #conMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #conRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #conSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }

        // INT
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "INT"; }
          Label #intScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #intMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #intRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #intSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }

        // WIS
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "WIS"; }
          Label #wisScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #wisMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #wisRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #wisSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }

        // CHA
        Group {
          LayoutMode: Left;
          Anchor: (Height: 35, Bottom: 5);
          $D.@AbilityLabel { @Text = "CHA"; }
          Label #chaScore {
            Anchor: (Width: 30);
            Text: "10";
            Style: (FontSize: 18, RenderBold: true);
          }
          Label #chaMod {
            Anchor: (Width: 30);
            Text: "+0";
            Style: (FontSize: 12, TextColor: #4caf50);
          }
          $D.@DndSmallButton #chaRoll { @Text = "Roll"; }
          $C.@SmallSecondaryTextButton #chaSave {
            @Text = "Save";
            Anchor: (Width: 45, Left: 3);
          }
        }
      }

      // === COMBAT INFO COLUMN ===
      Group #CombatInfo {
        LayoutMode: Top;
        Anchor: (Width: 220);

        $D.@SectionHeader { @Text = "HIT POINTS"; }

        $D.@HpDisplay #HpDisplay { }

        $D.@HpControls #HpControls { }

        Label {
          Anchor: (Top: 10, Bottom: 5);
          Text: "ARMOR CLASS";
          Style: (FontSize: 12, RenderBold: true, TextColor: #ccb588);
        }

        Label #ArmorClass {
          Anchor: (Bottom: 15);
          Text: "10";
          Style: (FontSize: 28, RenderBold: true);
        }

        $D.@DndSecondaryButton #rollInitiative {
          @Text = "Roll Initiative";
          @Width = 150;
        }
      }

      // === DICE ROLLER COLUMN ===
      Group #DiceRoller {
        LayoutMode: Top;
        FlexWeight: 1;

        Label {
          Anchor: (Bottom: 15);
          Text: "DICE ROLLER";
          Style: (FontSize: 12, RenderBold: true, TextColor: #ccb588);
        }

        Group #DiceButtons {
          LayoutMode: LeftCenterWrap;
          $D.@DiceButton #rollD4 { @Die = "D4"; }
          $D.@DiceButton #rollD6 { @Die = "D6"; }
          $D.@DiceButton #rollD8 { @Die = "D8"; }
          $D.@DiceButton #rollD10 { @Die = "D10"; }
          $D.@DiceButton #rollD12 { @Die = "D12"; }
          $D.@DiceButton #rollD20 { @Die = "D20"; }
        }

        Group #CombatStatus {
          LayoutMode: Top;
          Anchor: (Top: 15);

          $D.@CombatStatus #combatStatusLabel { @Text = "No Combat"; }

          Label #turnStatusLabel {
            Anchor: (Height: 16);
            Text: "";
            Style: (FontSize: 11, TextColor: #888888);
          }

          Group {
            LayoutMode: Left;
            Anchor: (Height: 40, Top: 10);
            $C.@SmallSecondaryTextButton #endTurnBtn {
              @Text = "End Turn";
              Anchor: (Width: 80, Height: 30, Right: 5);
            }
            $C.@SmallSecondaryTextButton #openCombatBtn {
              @Text = "Combat";
              Anchor: (Width: 80, Height: 30, Left: 5);
            }
          }
        }
      }
    }
  }
}
