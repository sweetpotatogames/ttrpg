// GM Control Panel - TTRPG Plugin
// Uses shared Dnd.ui component library
$C = "../../Common.ui";
$D = "../../Dnd/Dnd.ui";

Group #GMControlRoot {
  LayoutMode: Top;
  Background: #1a1a2e(0.95);
  Anchor: (Width: 700, Height: 550);

  // === HEADER ===
  Group #Header {
    LayoutMode: Top;
    Anchor: (Height: 60);
    Padding: (Bottom: 10);

    $D.@PageTitle { @Text = "GM Control Panel"; }

    Group #StatusRow {
      LayoutMode: Left;
      Anchor: (Height: 20);
      Label #gmStatusLabel {
        Anchor: (Width: 150);
        Text: "GM Mode: INACTIVE";
        Style: (FontSize: 12, RenderBold: true, TextColor: #f44336);
      }
      Label #statsLabel {
        Anchor: (Width: 250, Left: 20);
        Text: "NPCs: 0 | Damage: 0 | Healing: 0";
        Style: (FontSize: 10, TextColor: #888888);
      }
      Label #possessionLabel {
        Anchor: (Width: 150, Left: 20);
        Text: "Not possessing";
        Style: (FontSize: 10, TextColor: #888888);
      }
    }
  }

  // === MAIN CONTENT ===
  Group #Content {
    LayoutMode: Left;
    FlexWeight: 1;

    // === NPC COLUMN ===
    Group #NpcColumn {
      LayoutMode: Top;
      Anchor: (Width: 320);
      Padding: (Right: 10);

      $D.@SectionHeaderCompact { @Text = "MANAGED NPCs"; }

      Group #NpcListContainer {
        LayoutMode: Top;
        Background: #2a2a4e(0.6);
        Anchor: (Height: 320);

        $D.@EmptyStateMessage #noNpcsMsg {
          @Text = "No NPCs spawned. Use /gm spawn to create NPCs.";
        }

        // NPC Slot 0
        Group #npcSlot0 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot0Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot0Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot0Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot0SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot0DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot0HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 1
        Group #npcSlot1 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot1Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot1Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot1Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot1SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot1DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot1HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 2
        Group #npcSlot2 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot2Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot2Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot2Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot2SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot2DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot2HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 3
        Group #npcSlot3 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot3Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot3Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot3Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot3SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot3DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot3HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 4
        Group #npcSlot4 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot4Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot4Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot4Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot4SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot4DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot4HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 5
        Group #npcSlot5 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot5Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot5Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot5Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot5SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot5DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot5HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 6
        Group #npcSlot6 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot6Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot6Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot6Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot6SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot6DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot6HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }

        // NPC Slot 7
        Group #npcSlot7 {
          LayoutMode: Left;
          Visible: false;
          Background: #1a1a2e(0.5);
          Anchor: (Height: 35, Bottom: 4);
          Label #npcSlot7Name {
            Anchor: (Width: 100);
            Text: "NPC Name";
            Style: (FontSize: 11, TextColor: #cccccc);
          }
          Label #npcSlot7Hp {
            Anchor: (Width: 50, Left: 5);
            Text: "10/10";
            Style: (FontSize: 10, TextColor: #4caf50);
          }
          Label #npcSlot7Ac {
            Anchor: (Width: 35, Left: 5);
            Text: "AC:10";
            Style: (FontSize: 9, TextColor: #888888);
          }
          $C.@SmallSecondaryTextButton #npcSlot7SelectBtn {
            @Text = "Sel";
            Anchor: (Width: 35, Height: 25, Left: 5);
          }
          $C.@SmallSecondaryTextButton #npcSlot7DamageBtn {
            @Text = "-";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
          $C.@SmallSecondaryTextButton #npcSlot7HealBtn {
            @Text = "+";
            Anchor: (Width: 25, Height: 25, Left: 3);
          }
        }
      }
    }

    // === RIGHT COLUMN ===
    Group #RightColumn {
      LayoutMode: Top;
      FlexWeight: 1;
      Padding: (Left: 10);

      $D.@SectionHeaderCompact { @Text = "INITIATIVE ORDER"; }

      Group #InitiativeContainer {
        LayoutMode: Top;
        Background: #2a2a4e(0.6);
        Anchor: (Height: 180, Bottom: 15);

        $D.@EmptyStateMessage #noInitMsg {
          @Text = "No initiative rolled yet.";
          Anchor: (Height: 20);
        }

        // Initiative slots 0-7
        Label #initSlot0 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "1. Player (20)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot1 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "2. Player (18)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot2 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "3. Player (15)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot3 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "4. Player (12)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot4 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "5. Player (10)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot5 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "6. Player (8)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot6 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "7. Player (5)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
        Label #initSlot7 {
          Visible: false;
          Anchor: (Height: 18);
          Text: "8. Player (3)";
          Style: (FontSize: 11, TextColor: #cccccc);
        }
      }

      $D.@SectionHeaderCompact { @Text = "ACTIONS"; }

      Group #ActionsContainer {
        LayoutMode: Top;

        Group {
          LayoutMode: Left;
          Anchor: (Height: 40, Bottom: 8);
          $D.@DndSecondaryButton #toggleGmBtn {
            @Text = "Toggle GM Mode";
            @Width = 130;
          }
          $D.@DndSecondaryButton #refreshBtn {
            @Text = "Refresh";
            @Width = 90;
            Anchor: (Left: 10);
          }
        }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 40, Bottom: 8);
          $D.@DndSecondaryButton #possessSelectedBtn {
            @Text = "Possess Selected";
            @Width = 130;
          }
          $D.@DndSecondaryButton #unpossessBtn {
            @Text = "Unpossess";
            @Width = 90;
            Anchor: (Left: 10);
          }
        }

        Group {
          LayoutMode: Left;
          Anchor: (Height: 40, Bottom: 8);
          $D.@DndSecondaryButton #addInitBtn {
            @Text = "Add to Init";
            @Width = 105;
          }
          $D.@DndSecondaryButton #removeInitBtn {
            @Text = "Remove Init";
            @Width = 105;
            Anchor: (Left: 10);
          }
        }
      }

      Group #HelpSection {
        LayoutMode: Top;
        Anchor: (Top: 10);

        $D.@TipsHeader { }

        $D.@HelpText { @Text = "- Click 'Sel' to select an NPC"; Anchor: (Height: 12); }
        $D.@HelpText { @Text = "- Use +/- for quick damage/heal"; Anchor: (Height: 12); }
        $D.@HelpText { @Text = "- Possess lets you control NPCs"; Anchor: (Height: 12); }
      }
    }
  }
}
