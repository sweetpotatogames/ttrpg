// Combat Control Page - Interactive combat management
// Modal page with buttons for combat actions

$C = "../../../Common.ui";

$C.@PageOverlay {}

$C.@Container {
    Anchor: (Width: 500, Height: 450);
    @CloseButton = true;

    #Title {
        Group {
            $C.@Title {
                @Text = "Combat Control";
            }
            Label #combatStatus {
                Text: "No Active Combat";
                Style: (FontSize: 12, TextColor: #888888);
                Anchor: (Top: 5);
            }
        }
    }

    #Content {
        LayoutMode: Left;
        Padding: (Full: 15);

        // Left Column - Initiative Order
        Group #InitiativeColumn {
            Anchor: (Width: 200);
            LayoutMode: Top;
            Padding: (Full: 10);

            Label {
                Text: "INITIATIVE ORDER";
                Style: (FontSize: 12, RenderBold: true, TextColor: #ccb588);
                Anchor: (Bottom: 10);
            }

            // Initiative list container
            Group #InitiativeList {
                LayoutMode: Top;
                Padding: (Full: 5);
                Background: (
                    Color: #1a1a2e,
                    Opacity: 0.5,
                    BorderColor: #3a3a5e,
                    BorderSize: 1
                );
                Anchor: (Bottom: 10);

                Label #noInitiativeMsg {
                    Text: "No combatants yet.\nRoll initiative to join!";
                    Style: (FontSize: 10, TextColor: #888888, TextAlign: Center);
                    Anchor: (Height: 40);
                    Visible: true;
                }

                // Initiative entries (up to 8)
                Label #initEntry0 {
                    Text: "1. Player (20)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry1 {
                    Text: "2. Player (18)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry2 {
                    Text: "3. Player (15)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry3 {
                    Text: "4. Player (12)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry4 {
                    Text: "5. Player (10)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry5 {
                    Text: "6. Player (8)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry6 {
                    Text: "7. Player (5)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
                Label #initEntry7 {
                    Text: "8. Player (3)";
                    Style: (FontSize: 11, TextColor: #cccccc);
                    Anchor: (Height: 18);
                    Visible: false;
                }
            }

            // Roll Initiative button
            $C.@SecondaryTextButton #rollInitBtn {
                @Text = "Roll Initiative";
                Anchor: (Width: 180, Height: 35);
            }
        }

        // Right Column - Current Turn & Actions
        Group #ActionColumn {
            FlexWeight: 1;
            LayoutMode: Top;
            Padding: (Full: 10, Left: 20);

            // Current Turn Display
            Label {
                Text: "CURRENT TURN";
                Style: (FontSize: 12, RenderBold: true, TextColor: #ccb588);
                Anchor: (Bottom: 10);
            }

            Group #CurrentTurnBox {
                Anchor: (Height: 70, Bottom: 15);
                Background: (
                    Color: #2a2a4e,
                    Opacity: 0.8,
                    BorderColor: #4a4a6e,
                    BorderSize: 1
                );
                Padding: (Full: 10);
                LayoutMode: Top;

                Label #currentTurnLabel {
                    Text: "No combat in progress";
                    Style: (FontSize: 14, RenderBold: true, TextColor: #ffffff);
                    Anchor: (Height: 22);
                }

                Label #turnPromptLabel {
                    Text: "Start combat to begin";
                    Style: (FontSize: 12, TextColor: #888888);
                    Anchor: (Height: 20);
                }
            }

            // Action Buttons
            Label {
                Text: "ACTIONS";
                Style: (FontSize: 12, RenderBold: true, TextColor: #ccb588);
                Anchor: (Bottom: 10);
            }

            Group #ActionButtons {
                LayoutMode: Top;

                // End Turn button (primary action)
                $C.@PrimaryTextButton #endTurnBtn {
                    @Text = "End Turn";
                    Anchor: (Width: 220, Height: 40, Bottom: 10);
                }

                // Secondary actions
                Group {
                    LayoutMode: Left;
                    Anchor: (Height: 35, Bottom: 10);

                    $C.@SecondaryTextButton #startCombatBtn {
                        @Text = "Start Combat";
                        Anchor: (Width: 105, Right: 5);
                    }
                    $C.@SecondaryTextButton #endCombatBtn {
                        @Text = "End Combat";
                        Anchor: (Width: 105, Left: 5);
                    }
                }

                // Character Sheet button
                $C.@SecondaryTextButton #openSheetBtn {
                    @Text = "Open Character Sheet";
                    Anchor: (Width: 220, Height: 35, Top: 10);
                }
            }

            // Help text
            Group #HelpText {
                Anchor: (Top: 20);
                LayoutMode: Top;

                Label {
                    Text: "Tips:";
                    Style: (FontSize: 10, RenderBold: true, TextColor: #888888);
                    Anchor: (Bottom: 5);
                }
                Label {
                    Text: "- Roll initiative before starting combat";
                    Style: (FontSize: 9, TextColor: #666666);
                    Anchor: (Height: 14);
                }
                Label {
                    Text: "- Only current player can end their turn";
                    Style: (FontSize: 9, TextColor: #666666);
                    Anchor: (Height: 14);
                }
                Label {
                    Text: "- Use character sheet for dice rolls";
                    Style: (FontSize: 9, TextColor: #666666);
                    Anchor: (Height: 14);
                }
            }
        }
    }
}
